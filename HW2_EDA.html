<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Shufeng Li">

<title>503-HW2_EDA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="HW2_EDA_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW2_EDA_files/libs/quarto-html/quarto.js"></script>
<script src="HW2_EDA_files/libs/quarto-html/popper.min.js"></script>
<script src="HW2_EDA_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW2_EDA_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW2_EDA_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW2_EDA_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW2_EDA_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW2_EDA_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW2_EDA_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">503-HW2_EDA</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Shufeng Li </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>Data summary</p>
<p>The dataset is a collection of three CSV files containing information on patients with collagen diseases who visited the University hospital. The data includes information on patients’ basic information, special laboratory examinations, and laboratory examinations stored in the hospital’s information system.</p>
<p>The first dataset, tsumoto_a.csv, contains patient information including their identification, sex, birthday, date of input and admission, diagnosis, and description. The second dataset, tsumoto_b.csv, contains special laboratory examinations including the examination date, anti-cardiolipin antibodies, ANA patterns, measures of degree of coagulation, symptoms, and degree of thrombosis. The third dataset, tsumoto_c.csv, includes laboratory examinations stored in the hospital’s information system, such as blood glucose levels, white and red blood cell counts, and IgG and IgM levels, among others.</p>
<p>The data is primarily focused on searching for patterns that can detect and predict thrombosis in patients with collagen diseases, as well as identifying features that can classify these diseases correctly. There is also interest in identifying temporal patterns before and after thrombosis that may be useful in predicting it. Given that the data spans a period from 1980 to 1999, it may be necessary to adjust for temporal trends and changes in medical practices over time.</p>
<p>Initial questions</p>
<ol type="1">
<li><p>What is the most common diagnosis of Collagen diseases ？</p></li>
<li><p>Can Patients in different level of thrombosis be distinguish by anti-body features ？</p></li>
<li><p>Do Patients with different diagnosis have different anti-body features ？</p></li>
<li><p>What are Factors not just anti-body important for predicting and detecting thrombosis ?</p></li>
<li><p>Search for temporal patterns speciﬁc/sensitive to each collagen diseases.</p></li>
</ol>
<p>Data munging</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ignore warning messages</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the three data files</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>tsumoto_a <span class="op">=</span> pd.read_csv(<span class="st">'/Users/shufengli/Desktop/TSUMOTO_A.CSV'</span>,encoding<span class="op">=</span><span class="st">'iso-8859-1'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>tsumoto_b <span class="op">=</span> pd.read_csv(<span class="st">'/Users/shufengli/Desktop/TSUMOTO_B.CSV'</span>,encoding<span class="op">=</span><span class="st">'iso-8859-1'</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>tsumoto_c <span class="op">=</span> pd.read_csv(<span class="st">'/Users/shufengli/Desktop/TSUMOTO_C.CSV'</span>,encoding<span class="op">=</span><span class="st">'iso-8859-1'</span>, error_bad_lines<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># drop duplicate rows based on ID column</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>tsumoto_a.drop_duplicates(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>tsumoto_b.drop_duplicates(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>tsumoto_c.drop_duplicates(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># merge the three data files on the ID column</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>part1_data <span class="op">=</span> pd.merge(tsumoto_a, tsumoto_b, on<span class="op">=</span><span class="st">'ID'</span>).merge(tsumoto_c, on<span class="op">=</span><span class="st">'ID'</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># drop duplicate rows</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>part1_data.drop_duplicates(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># fill any missing values with empty string</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>part1_data.fillna(<span class="st">''</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># convert object columns to categorical</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> part1_data.columns:</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> part1_data[col].dtype <span class="op">==</span> <span class="st">'object'</span>:</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        part1_data[col] <span class="op">=</span> part1_data[col].astype(<span class="st">'category'</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># convert ID column to categorical</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>part1_data[<span class="st">'ID'</span>] <span class="op">=</span> part1_data[<span class="st">'ID'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># replace spaces and hyphens in column names with underscores, and convert column names to lowercase</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>part1_data.columns <span class="op">=</span> [i.replace(<span class="st">' '</span>, <span class="st">'_'</span>).replace(<span class="st">'-'</span>, <span class="st">'_'</span>) <span class="cf">for</span> i <span class="kw">in</span> part1_data.columns.<span class="bu">str</span>.lower()]</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># function to convert a column to a date format, or return NaN if it can't be converted</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_date(x):</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pd.to_datetime(x)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.nan</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="co"># convert examination_date column to a string format and apply the to_date function to other columns</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>part1_data[<span class="st">'examination_date'</span>] <span class="op">=</span> part1_data[<span class="st">'examination_date'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: pd.to_datetime(x)).astype(<span class="st">'str'</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>part1_data[<span class="st">'birthday'</span>] <span class="op">=</span> pd.to_datetime(part1_data[<span class="st">'birthday'</span>]).<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>part1_data[<span class="st">'first_date'</span>] <span class="op">=</span> part1_data[<span class="st">'first_date'</span>].<span class="bu">apply</span>(to_date).astype(<span class="st">'str'</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>part1_data[<span class="st">'id'</span>] <span class="op">=</span> part1_data[<span class="st">'id'</span>].astype(<span class="st">'str'</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="co"># drop rows where thrombosis column value is 3</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>part1_data <span class="op">=</span> part1_data[part1_data[<span class="st">'thrombosis'</span>] <span class="op">!=</span> <span class="dv">3</span>]</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co"># function to drop the 3% lowest value in a column, to focus on the main diseases</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> drop_lowest_value(df, column_name):</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    group_data <span class="op">=</span> df[[<span class="st">'id'</span>, column_name]].groupby(column_name).count().reset_index()</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="bu">all</span> <span class="op">=</span> <span class="bu">len</span>(df)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    storage <span class="op">=</span> []</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> count, item <span class="kw">in</span> <span class="bu">enumerate</span>(group_data[<span class="st">'id'</span>]):</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> item <span class="op">/</span> <span class="bu">all</span> <span class="op">&lt;</span> <span class="fl">0.03</span>:</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>            storage.append(group_data[column_name][count])</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df[<span class="op">~</span>df[column_name].isin(storage)]</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co"># drop 3% lowest values in columns of interest</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> drop_lowest_value(part1_data, <span class="st">'admission'</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> drop_lowest_value(new_df, <span class="st">'kct'</span>)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> drop_lowest_value(new_df, <span class="st">'rvvt'</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> drop_lowest_value(new_df, <span class="st">'u_pro'</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> drop_lowest_value(new_df, <span class="st">'ra'</span>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="co"># save cleaned data to a new CSV file</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>new_df.to_csv(<span class="st">'/Users/shufengli/Desktop/cleaned_data1.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>b'Skipping line 8449: expected 44 fields, saw 46\nSkipping line 8450: expected 44 fields, saw 46\nSkipping line 8451: expected 44 fields, saw 46\nSkipping line 8452: expected 44 fields, saw 46\nSkipping line 8453: expected 44 fields, saw 46\nSkipping line 8454: expected 44 fields, saw 46\nSkipping line 8455: expected 44 fields, saw 46\nSkipping line 8456: expected 44 fields, saw 46\nSkipping line 8457: expected 44 fields, saw 46\nSkipping line 8458: expected 44 fields, saw 46\nSkipping line 8459: expected 44 fields, saw 46\nSkipping line 8460: expected 44 fields, saw 46\nSkipping line 8461: expected 44 fields, saw 46\nSkipping line 8462: expected 44 fields, saw 46\nSkipping line 8463: expected 44 fields, saw 46\nSkipping line 8464: expected 44 fields, saw 46\n'
b'Skipping line 19329: expected 44 fields, saw 46\nSkipping line 19330: expected 44 fields, saw 46\nSkipping line 19331: expected 44 fields, saw 46\nSkipping line 19332: expected 44 fields, saw 46\nSkipping line 19333: expected 44 fields, saw 46\nSkipping line 19334: expected 44 fields, saw 46\nSkipping line 19335: expected 44 fields, saw 46\nSkipping line 19336: expected 44 fields, saw 46\nSkipping line 19337: expected 44 fields, saw 46\nSkipping line 19338: expected 44 fields, saw 46\nSkipping line 19339: expected 44 fields, saw 46\nSkipping line 19340: expected 44 fields, saw 46\nSkipping line 19341: expected 44 fields, saw 46\nSkipping line 19342: expected 44 fields, saw 46\nSkipping line 19343: expected 44 fields, saw 46\nSkipping line 19344: expected 44 fields, saw 46\n'</code></pre>
</div>
</div>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> ttest_ind</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'/Users/shufengli/Desktop/cleaned_data1.csv'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'id'</span>] <span class="op">=</span> data[<span class="st">'id'</span>].astype(<span class="st">'str'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>sex</th>
      <th>birthday</th>
      <th>description</th>
      <th>first_date</th>
      <th>admission</th>
      <th>diagnosis_x</th>
      <th>examination_date</th>
      <th>acl_igg</th>
      <th>acl_igm</th>
      <th>...</th>
      <th>c3</th>
      <th>c4</th>
      <th>rnp</th>
      <th>sm</th>
      <th>sc170</th>
      <th>ssa</th>
      <th>ssb</th>
      <th>centromea</th>
      <th>dna</th>
      <th>dna_ii</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14872</td>
      <td>F</td>
      <td>1953-09-21</td>
      <td>97.08.13</td>
      <td>NaT</td>
      <td>+</td>
      <td>MCTD</td>
      <td>1997-05-27</td>
      <td>1.3</td>
      <td>1.6</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>14872</td>
      <td>F</td>
      <td>1953-09-21</td>
      <td>97.08.13</td>
      <td>NaT</td>
      <td>+</td>
      <td>MCTD</td>
      <td>1997-05-27</td>
      <td>1.3</td>
      <td>1.6</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14872</td>
      <td>F</td>
      <td>1953-09-21</td>
      <td>97.08.13</td>
      <td>NaT</td>
      <td>+</td>
      <td>MCTD</td>
      <td>1997-05-27</td>
      <td>1.3</td>
      <td>1.6</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14872</td>
      <td>F</td>
      <td>1953-09-21</td>
      <td>97.08.13</td>
      <td>NaT</td>
      <td>+</td>
      <td>MCTD</td>
      <td>1997-05-27</td>
      <td>1.3</td>
      <td>1.6</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14872</td>
      <td>F</td>
      <td>1953-09-21</td>
      <td>97.08.13</td>
      <td>NaT</td>
      <td>+</td>
      <td>MCTD</td>
      <td>1997-05-27</td>
      <td>1.3</td>
      <td>1.6</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 62 columns</p>
</div>
</div>
</div>
<section id="basic-statistic-features-of-anti-bodies-of-patients" class="level2">
<h2 class="anchored" data-anchor-id="basic-statistic-features-of-anti-bodies-of-patients">Basic Statistic Features of anti-bodies of patients</h2>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>acl_igg</th>
      <th>acl_igm</th>
      <th>ana</th>
      <th>acl_iga</th>
      <th>thrombosis</th>
      <th>date</th>
      <th>alb</th>
      <th>un</th>
      <th>t_bil</th>
      <th>t_cho</th>
      <th>tg</th>
      <th>rbc</th>
      <th>hgb</th>
      <th>pt</th>
      <th>aptt</th>
      <th>dna</th>
      <th>dna_ii</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>17569.000000</td>
      <td>17569.000000</td>
      <td>16885.000000</td>
      <td>17569.000000</td>
      <td>17569.000000</td>
      <td>17569.00000</td>
      <td>13541.000000</td>
      <td>13940.00000</td>
      <td>11765.000000</td>
      <td>12455.000000</td>
      <td>9702.00000</td>
      <td>15233.000000</td>
      <td>15233.000000</td>
      <td>2424.000000</td>
      <td>649.000000</td>
      <td>141.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>22.185466</td>
      <td>711.188645</td>
      <td>701.909387</td>
      <td>190.130969</td>
      <td>0.364790</td>
      <td>929327.23735</td>
      <td>4.002659</td>
      <td>14.72736</td>
      <td>0.588545</td>
      <td>198.672100</td>
      <td>134.62214</td>
      <td>4.160029</td>
      <td>12.192477</td>
      <td>13.529868</td>
      <td>80.198767</td>
      <td>19.567305</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>std</th>
      <td>135.593539</td>
      <td>11447.230895</td>
      <td>1321.990045</td>
      <td>2969.612218</td>
      <td>0.659415</td>
      <td>47799.04341</td>
      <td>0.488054</td>
      <td>9.48212</td>
      <td>0.795018</td>
      <td>49.867487</td>
      <td>76.36442</td>
      <td>0.595445</td>
      <td>1.777378</td>
      <td>3.683204</td>
      <td>31.719726</td>
      <td>15.817763</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>810127.00000</td>
      <td>0.100000</td>
      <td>0.00000</td>
      <td>0.100000</td>
      <td>8.000000</td>
      <td>1.00000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>9.500000</td>
      <td>22.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.500000</td>
      <td>1.700000</td>
      <td>16.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>891102.00000</td>
      <td>3.700000</td>
      <td>10.00000</td>
      <td>0.370000</td>
      <td>165.000000</td>
      <td>81.00000</td>
      <td>3.840000</td>
      <td>11.200000</td>
      <td>11.300000</td>
      <td>52.000000</td>
      <td>10.400000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.400000</td>
      <td>2.600000</td>
      <td>64.000000</td>
      <td>2.700000</td>
      <td>0.000000</td>
      <td>950327.00000</td>
      <td>4.100000</td>
      <td>13.00000</td>
      <td>0.470000</td>
      <td>195.000000</td>
      <td>117.00000</td>
      <td>4.220000</td>
      <td>12.400000</td>
      <td>12.200000</td>
      <td>87.000000</td>
      <td>16.600000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>3.400000</td>
      <td>4.800000</td>
      <td>1024.000000</td>
      <td>8.700000</td>
      <td>1.000000</td>
      <td>970409.00000</td>
      <td>4.300000</td>
      <td>16.00000</td>
      <td>0.600000</td>
      <td>228.000000</td>
      <td>167.00000</td>
      <td>4.540000</td>
      <td>13.400000</td>
      <td>14.300000</td>
      <td>103.000000</td>
      <td>25.200000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1502.400000</td>
      <td>187122.000000</td>
      <td>4096.000000</td>
      <td>48547.000000</td>
      <td>2.000000</td>
      <td>990304.00000</td>
      <td>5.900000</td>
      <td>155.00000</td>
      <td>26.100000</td>
      <td>671.000000</td>
      <td>808.00000</td>
      <td>6.570000</td>
      <td>17.900000</td>
      <td>34.200000</td>
      <td>159.000000</td>
      <td>115.200000</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="calculate-the-percentage-of-missing-values-descending-by-columns-because-most-of-patients-doesnt-do-special-tests" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-percentage-of-missing-values-descending-by-columns-because-most-of-patients-doesnt-do-special-tests">Calculate the percentage of missing values descending by columns because most of patients doesn’t do special tests</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data.isnull().<span class="bu">sum</span>() <span class="op">/</span> data.shape[<span class="dv">0</span>]).rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">'percentage'</span>}).sort_values(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    by<span class="op">=</span><span class="st">'percentage'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>percentage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>dna_ii</th>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>centromea</th>
      <td>0.998862</td>
    </tr>
    <tr>
      <th>sc170</th>
      <td>0.995959</td>
    </tr>
    <tr>
      <th>dna</th>
      <td>0.991975</td>
    </tr>
    <tr>
      <th>ssb</th>
      <td>0.986966</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>acl_igg</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>acl_igm</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>acl_iga</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>date</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>id</th>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
<p>62 rows × 1 columns</p>
</div>
</div>
</div>
</section>
<section id="the-most-common-diagnosis-of-collagen-diseases" class="level2">
<h2 class="anchored" data-anchor-id="the-most-common-diagnosis-of-collagen-diseases">The most common diagnosis of Collagen diseases</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="9">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram of rank 10 diagnosis</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>rank_10_diagnosis <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> data.diagnosis_x.value_counts().sort_values(ascending<span class="op">=</span><span class="va">False</span>)[:<span class="dv">10</span>].index]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>rank_10_index <span class="op">=</span> data[<span class="st">'diagnosis_x'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="va">True</span> <span class="cf">if</span> x <span class="kw">in</span> rank_10_diagnosis <span class="cf">else</span> <span class="va">False</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>rank_10_diagnosis_data <span class="op">=</span> data[rank_10_index]</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">6</span>))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>sns.countplot(rank_10_diagnosis_data.diagnosis_x, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'Diagnosis'</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>rank_10_diagnosis)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Count Plot of Diagnosis in rank 10 (figure 1)'</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Diagnosis'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Count'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="rank-1-is-systemic-lupus-erythematosus-the-number-of-cases-far-exceeds-that-of-other-cases.-stevens-johnson-syndrome-ranks-2-nd-and-sle-with-sjs-ranks-3rd." class="level3">
<h3 class="anchored" data-anchor-id="rank-1-is-systemic-lupus-erythematosus-the-number-of-cases-far-exceeds-that-of-other-cases.-stevens-johnson-syndrome-ranks-2-nd-and-sle-with-sjs-ranks-3rd.">Rank 1 is Systemic lupus erythematosus, the number of cases far exceeds that of other cases. Stevens-Johnson syndrome ranks 2 nd, and sle with sjs ranks 3rd.</h3>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="10">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> data[[<span class="st">'thrombosis'</span>, <span class="st">'acl_igg'</span>, <span class="st">'acl_igm'</span>, <span class="st">'ana'</span>, <span class="st">'acl_iga'</span>, <span class="st">'date'</span>, <span class="st">'un'</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">'t_cho'</span>, <span class="st">'tg'</span>, <span class="st">'rbc'</span>, <span class="st">'hgb'</span>, <span class="st">'pt'</span>, <span class="st">'aptt'</span>]].groupby(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'thrombosis'</span>).mean().reset_index()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>grouped.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-barplot-shows-the-mean-of-different-anti-body-for-patients-with-difference-level-of-thrombosislevel-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="the-barplot-shows-the-mean-of-different-anti-body-for-patients-with-difference-level-of-thrombosislevel-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">The barplot shows the mean of different anti-body for patients with difference level of thrombosis(level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="11">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, ncols<span class="op">=</span><span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">21</span>, <span class="dv">24</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> ax.flatten()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(grouped.columns)):</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    sns.barplot(x<span class="op">=</span>grouped.index, y<span class="op">=</span>grouped.columns[i], ax<span class="op">=</span>ax[i <span class="op">-</span> <span class="dv">1</span>], label<span class="op">=</span><span class="st">'Diagnosis'</span>, data<span class="op">=</span>grouped)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_title(grouped.columns[i], fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_xlabel(<span class="st">'thrombosis level'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_ylabel(<span class="st">'mean_value'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Mean of different anti-body for patients with difference level of thrombosis(figure2)'</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>Text(0.5, 0.98, 'Mean of different anti-body for patients with difference level of thrombosis(figure2)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="from-the-figure-we-can-see-that-acl_igg-acl_igm-ana-acl_iga-are-the-four-more-distinguishable-features.-when-the-patient-is-in-mild-thrombosis-acl_igg-rises-significantly-so-acc_igg-can-be-used-to-distinguish-mild-thrombosis.-acl_igm-is-higher-when-the-patient-has-no-symptoms-of-thrombosis-so-it-can-be-used-to-distinguish-patients-without-thrombosis.-in-addition-as-the-patients-thrombosis-symptoms-deepened-ana-tended-to-increase-and-acl_iga-showed-a-decreasing-trend." class="level3">
<h3 class="anchored" data-anchor-id="from-the-figure-we-can-see-that-acl_igg-acl_igm-ana-acl_iga-are-the-four-more-distinguishable-features.-when-the-patient-is-in-mild-thrombosis-acl_igg-rises-significantly-so-acc_igg-can-be-used-to-distinguish-mild-thrombosis.-acl_igm-is-higher-when-the-patient-has-no-symptoms-of-thrombosis-so-it-can-be-used-to-distinguish-patients-without-thrombosis.-in-addition-as-the-patients-thrombosis-symptoms-deepened-ana-tended-to-increase-and-acl_iga-showed-a-decreasing-trend.">From the figure, we can see that acl_igg, acl_igm, ana, acl_iga are the four more distinguishable features. When the patient is in mild thrombosis, acl_igg rises significantly, so acc_igg can be used to distinguish mild thrombosis. acl_igm is higher when the patient has no symptoms of thrombosis, so it can be used to distinguish patients without thrombosis. In addition, as the patient’s thrombosis symptoms deepened, ana tended to increase and acl_iga showed a decreasing trend.</h3>
</section>
</section>
<section id="the-boxplot-shows-the-value-distribution-of-different-anti-body-for-patients-with-difference-level-of-thrombosislevel-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="the-boxplot-shows-the-value-distribution-of-different-anti-body-for-patients-with-difference-level-of-thrombosislevel-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">The boxplot shows the value distribution of different anti-body for patients with difference level of thrombosis(level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="12">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, ncols<span class="op">=</span><span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">24</span>, <span class="dv">24</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> ax.flatten()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(grouped.columns)):</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(x<span class="op">=</span><span class="st">"thrombosis"</span>, y<span class="op">=</span>grouped.columns[i], ax<span class="op">=</span>ax[i <span class="op">-</span> <span class="dv">1</span>],</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                data<span class="op">=</span>data[[<span class="st">'thrombosis'</span>, <span class="st">'acl_igg'</span>, <span class="st">'acl_igm'</span>, <span class="st">'ana'</span>, <span class="st">'acl_iga'</span>, <span class="st">'date'</span>, <span class="st">'un'</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                           <span class="st">'t_cho'</span>, <span class="st">'tg'</span>, <span class="st">'rbc'</span>, <span class="st">'hgb'</span>, <span class="st">'pt'</span>, <span class="st">'aptt'</span>]])</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_title(grouped.columns[i], fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_xlabel(<span class="st">'thrombosis level'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_ylabel(<span class="st">'range of value'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Value distribution of different anti-body for patients with difference level of thrombosis(figure3)'</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>Text(0.5, 0.98, 'Value distribution of different anti-body for patients with difference level of thrombosis(figure3)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-11-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="the-box-plot-reflects-the-distribution-characteristics-of-different-antibody-concentrations-which-avoids-the-influence-of-statistical-sample-outliers-on-the-mean-value-compared-to-the-bar-chart-and-therefore-allows-more-objective-screening-of-discriminatory-indicators.-according-to-the-box-plot-ana-pt-and-aptt-are-the-features-that-can-distinguish-different-degrees-of-thrombosis." class="level3">
<h3 class="anchored" data-anchor-id="the-box-plot-reflects-the-distribution-characteristics-of-different-antibody-concentrations-which-avoids-the-influence-of-statistical-sample-outliers-on-the-mean-value-compared-to-the-bar-chart-and-therefore-allows-more-objective-screening-of-discriminatory-indicators.-according-to-the-box-plot-ana-pt-and-aptt-are-the-features-that-can-distinguish-different-degrees-of-thrombosis.">The box plot reflects the distribution characteristics of different antibody concentrations, which avoids the influence of statistical sample outliers on the mean value compared to the bar chart, and therefore allows more objective screening of discriminatory indicators. According to the box plot, ana, pt, and aptt are the features that can distinguish different degrees of thrombosis.</h3>
</section>
</section>
<section id="focus-attention-on-rank3-diagnosis-and-do-furthur-analysis-rank-1-sle-rank-2-sjs-rank-3-sle-sjs" class="level2">
<h2 class="anchored" data-anchor-id="focus-attention-on-rank3-diagnosis-and-do-furthur-analysis-rank-1-sle-rank-2-sjs-rank-3-sle-sjs">Focus attention on rank3 diagnosis and do furthur analysis (Rank 1 SLE, Rank 2 SJS, Rank 3 SLE SJS)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select data when patient is SLE</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>rank3_diagnosis_data <span class="op">=</span> data[</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    (data.diagnosis_x <span class="op">==</span> <span class="st">'SLE'</span>) <span class="op">|</span> (data.diagnosis_x <span class="op">==</span> <span class="st">'SJS'</span>) <span class="op">|</span> (data.diagnosis_x <span class="op">==</span> <span class="st">'SLE, SJS'</span>)]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>grouped_rank3_feature <span class="op">=</span> rank3_diagnosis_data[[<span class="st">'diagnosis_x'</span>, <span class="st">'acl_igg'</span>, <span class="st">'acl_igm'</span>, <span class="st">'ana'</span>, <span class="st">'acl_iga'</span>, <span class="st">'date'</span>, <span class="st">'un'</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">'t_cho'</span>, <span class="st">'tg'</span>, <span class="st">'rbc'</span>, <span class="st">'hgb'</span>, <span class="st">'pt'</span>, <span class="st">'aptt'</span>]]</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>grouped_rank3_feature.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-violin-plot-reflects-the-distribution-of-different-antibody-concentrations-for-patients-in-sle-sjs-slesjs-its-role-is-similar-to-the-box-plot." class="level2">
<h2 class="anchored" data-anchor-id="the-violin-plot-reflects-the-distribution-of-different-antibody-concentrations-for-patients-in-sle-sjs-slesjs-its-role-is-similar-to-the-box-plot.">The violin plot reflects the distribution of different antibody concentrations for patients in (SLE, SJS, SLE&amp;SJS), its role is similar to the box plot.</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, ncols<span class="op">=</span><span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">21</span>, <span class="dv">24</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> ax.flatten()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(grouped_rank3_feature.columns)):</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    sns.violinplot(data<span class="op">=</span>grouped_rank3_feature, x<span class="op">=</span><span class="st">'diagnosis_x'</span>, y<span class="op">=</span>grouped_rank3_feature.columns[i],</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                   ax<span class="op">=</span>ax[i <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_title(grouped_rank3_feature.columns[i], fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_xlabel(<span class="st">'diagnosis'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    ax[i <span class="op">-</span> <span class="dv">1</span>].set_ylabel(<span class="st">'range of value'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Distribution of different antibody concentrations for patients in (SLE, SJS, SLE&amp;SJS)(figure4)'</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>Text(0.5, 0.98, 'Distribution of different antibody concentrations for patients in (SLE, SJS, SLE&amp;SJS)(figure4)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-13-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="unfortunately-as-seen-in-the-violin-plot-the-distribution-of-all-types-of-antibodies-in-the-first-three-diagnostic-symptoms-overlap-relatively-well.-therefore-it-is-not-possible-to-distinguish-the-first-three-diagnostic-symptoms-by-antibody-characteristics." class="level3">
<h3 class="anchored" data-anchor-id="unfortunately-as-seen-in-the-violin-plot-the-distribution-of-all-types-of-antibodies-in-the-first-three-diagnostic-symptoms-overlap-relatively-well.-therefore-it-is-not-possible-to-distinguish-the-first-three-diagnostic-symptoms-by-antibody-characteristics.">Unfortunately, as seen in the violin plot, the distribution of all types of antibodies in the first three diagnostic symptoms overlap relatively well. Therefore, it is not possible to distinguish the first three diagnostic symptoms by antibody characteristics.</h3>
</section>
</section>
<section id="t-test-of-mean-value-of-different-antibody-concentration-to-check-whether-the-mean-value-of-different-antibody-concentration-is-different-significantly." class="level2">
<h2 class="anchored" data-anchor-id="t-test-of-mean-value-of-different-antibody-concentration-to-check-whether-the-mean-value-of-different-antibody-concentration-is-different-significantly.">T-test of mean value of different antibody concentration, to check whether the mean value of different antibody concentration is different significantly.</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>feature_columns <span class="op">=</span> [<span class="st">'acl_igg'</span>, <span class="st">'acl_igm'</span>, <span class="st">'ana'</span>, <span class="st">'acl_iga'</span>, <span class="st">'un'</span>,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'t_cho'</span>, <span class="st">'tg'</span>, <span class="st">'rbc'</span>, <span class="st">'hgb'</span>, <span class="st">'pt'</span>, <span class="st">'aptt'</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_difference_between_feature(data: pd.DataFrame, columns: <span class="bu">list</span>):</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> columns:</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> data[data.diagnosis_x <span class="op">==</span> <span class="st">'SLE'</span>][col]</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> data[data.diagnosis_x <span class="op">==</span> <span class="st">'SJS'</span>][col]</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> data[data.diagnosis_x <span class="op">==</span> <span class="st">'SLE, SJS'</span>][col]</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ttest_ind(a, b, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'Patient with SLE 、 SJS has different feature of'</span>, col)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'SLE:'</span>, a.mean(), <span class="st">'SJS:'</span>, b.mean(), <span class="st">'P_value:'</span>, ttest_ind(a, b, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>])</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'-'</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ttest_ind(a, c, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'Patient with SLE 、（SLE, SJS）has different feature of'</span>, col)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'SLE:'</span>, a.mean(), <span class="st">'SLE, SJS:'</span>, c.mean(), <span class="st">'P_value:'</span>, ttest_ind(a, c, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>])</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'-'</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ttest_ind(b, c, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'Patient with SJS 、（SLE，SJS）has different feature of'</span>, col)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'SJS:'</span>, b.mean(), <span class="st">'SLE, SJS:'</span>, c.mean(), <span class="st">'P_value:'</span>, ttest_ind(b, c, equal_var<span class="op">=</span><span class="va">False</span>)[<span class="dv">1</span>])</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'-'</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'The t-test of feature'</span>, col, <span class="st">'has been done.'</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'*'</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>find_difference_between_feature(data, feature_columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Patient with SLE 、（SLE, SJS）has different feature of acl_igg
SLE: 5.836707105719278 SLE, SJS: 4.780585516178695 P_value: 0.004251356386202715
--------------------------------------------------
The t-test of feature acl_igg has been done.
**************************************************
Patient with SLE 、（SLE, SJS）has different feature of acl_igm
SLE: 6.366360485268433 SLE, SJS: 5.273651771956943 P_value: 4.884782494636794e-05
--------------------------------------------------
The t-test of feature acl_igm has been done.
**************************************************
The t-test of feature ana has been done.
**************************************************
Patient with SLE 、 SJS has different feature of acl_iga
SLE: 5.646655112651746 SJS: 2.705316973415133 P_value: 9.759015993881436e-70
--------------------------------------------------
Patient with SLE 、（SLE, SJS）has different feature of acl_iga
SLE: 5.646655112651746 SLE, SJS: 8.087750385207993 P_value: 3.2619798845706244e-19
--------------------------------------------------
Patient with SJS 、（SLE，SJS）has different feature of acl_iga
SJS: 2.705316973415133 SLE, SJS: 8.087750385207993 P_value: 1.4785033632185444e-90
--------------------------------------------------
The t-test of feature acl_iga has been done.
**************************************************
The t-test of feature un has been done.
**************************************************
The t-test of feature t_cho has been done.
**************************************************
The t-test of feature tg has been done.
**************************************************
The t-test of feature rbc has been done.
**************************************************
The t-test of feature hgb has been done.
**************************************************
The t-test of feature pt has been done.
**************************************************
The t-test of feature aptt has been done.
**************************************************</code></pre>
</div>
</div>
<section id="the-t-test-result-shows-that-sle-slesjs-has-different-mean-value-of-acl_igg-acl_igm-acl_iga.-sle-sjs-has-different-mean-value-of-acl_iga.-sjs-sjssle-has-different-mean-value-of-acl_iga.-these-information-can-be-used-to-help-distinguish-the-first-three-diagnostic-symptoms.-however-combined-with-the-analyst-of-the-violin-plot-these-information-can-not-be-used-to-distinguish-the-first-three-diagnostic-symptoms-directly-but-as-an-important-hint-of-the-first-three-diagnostic-symptoms." class="level3">
<h3 class="anchored" data-anchor-id="the-t-test-result-shows-that-sle-slesjs-has-different-mean-value-of-acl_igg-acl_igm-acl_iga.-sle-sjs-has-different-mean-value-of-acl_iga.-sjs-sjssle-has-different-mean-value-of-acl_iga.-these-information-can-be-used-to-help-distinguish-the-first-three-diagnostic-symptoms.-however-combined-with-the-analyst-of-the-violin-plot-these-information-can-not-be-used-to-distinguish-the-first-three-diagnostic-symptoms-directly-but-as-an-important-hint-of-the-first-three-diagnostic-symptoms.">The t-test result shows that (sle) (sle,sjs) has different mean value of acl_igg, acl_igm, acl_iga. (sle) (sjs) has different mean value of acl_iga. (sjs) (sjs,sle) has different mean value of acl_iga. These information can be used to help distinguish the first three diagnostic symptoms. However, combined with the analyst of the violin plot, these information can not be used to distinguish the first three diagnostic symptoms directly but as an important hint of the first three diagnostic symptoms.</h3>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>sle_data <span class="op">=</span> data[data.diagnosis_x <span class="op">==</span> <span class="st">'SLE'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="16">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">'sex'</span>, label<span class="op">=</span><span class="st">'Diagnosis'</span>, data<span class="op">=</span>sle_data)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Male and Feamle count in SLE patient(figure5)"</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>Text(0.5, 0.98, 'Male and Feamle count in SLE patient(figure5)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="the-class-samples-of-male-and-female-is-unbalance.-use-bootstrap-to-balance-the-male-and-female-sample" class="level2">
<h2 class="anchored" data-anchor-id="the-class-samples-of-male-and-female-is-unbalance.-use-bootstrap-to-balance-the-male-and-female-sample">The class samples of Male and Female is unbalance. Use bootstrap to balance the Male and Female sample</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="17">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bootstrap to balance the female and male class</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>sle_man_resample <span class="op">=</span> sle_data[sle_data.sex <span class="op">==</span> <span class="st">'M'</span>].sample(n<span class="op">=</span><span class="dv">6215</span>, replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>sle_woman_resample <span class="op">=</span> sle_data[sle_data.sex <span class="op">==</span> <span class="st">'F'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>balance_sle_data <span class="op">=</span> pd.concat([sle_man_resample, sle_woman_resample], axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-barplot-shows-the-mean-of-different-anti-body-for-sle-patients-in-male-or-female" class="level2">
<h2 class="anchored" data-anchor-id="the-barplot-shows-the-mean-of-different-anti-body-for-sle-patients-in-male-or-female">The barplot shows the mean of different anti-body for sle patients in Male or Female</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="19">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>grouped_sex <span class="op">=</span> balance_sle_data[[<span class="st">'sex'</span>, <span class="st">'acl_igg'</span>, <span class="st">'acl_igm'</span>, <span class="st">'ana'</span>, <span class="st">'acl_iga'</span>, <span class="st">'date'</span>, <span class="st">'un'</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                                <span class="st">'t_cho'</span>, <span class="st">'tg'</span>, <span class="st">'rbc'</span>, <span class="st">'hgb'</span>, <span class="st">'pt'</span>, <span class="st">'aptt'</span>]].groupby(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'sex'</span>).mean().reset_index()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>grouped_sex.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>grouped_sex.set_index(<span class="st">'sex'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, ncols<span class="op">=</span><span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">21</span>, <span class="dv">24</span>))</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> ax.flatten()</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(grouped_sex.columns)):</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    sns.barplot(x<span class="op">=</span>grouped_sex.index, y<span class="op">=</span>grouped_sex.columns[i], ax<span class="op">=</span>ax[i], label<span class="op">=</span><span class="st">'Sex'</span>, data<span class="op">=</span>grouped_sex)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    ax[i].set_title(grouped_sex.columns[i], fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    ax[i].set_xlabel(<span class="st">'Sex'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    ax[i].set_ylabel(<span class="st">'mean_value'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Mean of different anti-body for sle patients in Male or Female(figure6)"</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>Text(0.5, 0.98, 'Mean of different anti-body for sle patients in Male or Female(figure6)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-19-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="in-sle-patients-acl_igg-acl_igm-and-acl_iga-are-much-lower-in-men-than-in-women-and-ana-is-higher-than-in-women-therefore-the-effect-of-gender-on-antibody-characteristics-needs-to-be-considered-when-identifying-sle-patients." class="level3">
<h3 class="anchored" data-anchor-id="in-sle-patients-acl_igg-acl_igm-and-acl_iga-are-much-lower-in-men-than-in-women-and-ana-is-higher-than-in-women-therefore-the-effect-of-gender-on-antibody-characteristics-needs-to-be-considered-when-identifying-sle-patients.">In SLE patients, acl_igg, acl_igm, and acl_iga are much lower in men than in women, and ana is higher than in women; therefore, the effect of gender on antibody characteristics needs to be considered when identifying SLE patients.</h3>
</section>
</section>
<section id="prothrombin-time-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="prothrombin-time-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">Prothrombin time distribution for people in different thrombosis level (level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">12</span>))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"pt"</span>, hue<span class="op">=</span><span class="st">"thrombosis"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    multiple<span class="op">=</span><span class="st">"stack"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">".3"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    log_scale<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    kde<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Prothrombin time distribution for people in different thrombosis level(figure7)'</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'PT'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Text(0.5, 0, 'PT')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-20-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="by-stacking-the-bars-it-was-found-that-the-distribution-of-prothrombin-time-was-the-same-in-patients-without-thrombosis-and-in-patients-with-severe-thrombosis.-however-after-the-length-of-prothrombin-time-reached-20-only-patients-with-mild-thrombosis-remained-so-prothrombin-time-could-be-used-as-a-feature-to-distinguish-patients-with-mild-thrombosis." class="level3">
<h3 class="anchored" data-anchor-id="by-stacking-the-bars-it-was-found-that-the-distribution-of-prothrombin-time-was-the-same-in-patients-without-thrombosis-and-in-patients-with-severe-thrombosis.-however-after-the-length-of-prothrombin-time-reached-20-only-patients-with-mild-thrombosis-remained-so-prothrombin-time-could-be-used-as-a-feature-to-distinguish-patients-with-mild-thrombosis.">By stacking the bars, it was found that the distribution of Prothrombin time was the same in patients without thrombosis and in patients with severe thrombosis. However, after the length of Prothrombin time reached 20, only patients with mild thrombosis remained, so Prothrombin time could be used as a feature to distinguish patients with mild thrombosis.</h3>
</section>
</section>
<section id="anti-nucleus-antibody-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="anti-nucleus-antibody-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">Anti-nucleus antibody distribution for people in different thrombosis level (level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="21">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ana_data_over_zero <span class="op">=</span> data[data.ana <span class="op">&gt;</span> <span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="22">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">12</span>))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    ana_data_over_zero,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"ana"</span>, hue<span class="op">=</span><span class="st">"thrombosis"</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    multiple<span class="op">=</span><span class="st">"stack"</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">".3"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># bins=30,</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    log_scale<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    kde<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Anti-nucleus antibody distribution for people in different thrombosis level(figure8)'</span>, fontsize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'ANA'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>Text(0.5, 0, 'ANA')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-22-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="the-stacked-bar-graphs-showed-that-the-distribution-of-anti-nucleus-antibodies-was-in-a-few-narrow-intervals-and-only-30-intervals-were-distinguished-by-different-thrombosis-levels." class="level3">
<h3 class="anchored" data-anchor-id="the-stacked-bar-graphs-showed-that-the-distribution-of-anti-nucleus-antibodies-was-in-a-few-narrow-intervals-and-only-30-intervals-were-distinguished-by-different-thrombosis-levels.">The stacked bar graphs showed that the distribution of anti-nucleus antibodies was in a few narrow intervals, and only 30 intervals were distinguished by different thrombosis levels.</h3>
</section>
</section>
<section id="activated-partial-prothrombin-time-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="activated-partial-prothrombin-time-distribution-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">Activated partial prothrombin time distribution for people in different thrombosis level (level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="23">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">12</span>))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"aptt"</span>, hue<span class="op">=</span><span class="st">"thrombosis"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    multiple<span class="op">=</span><span class="st">"stack"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">".3"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># bins=30,</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    log_scale<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    kde<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Activated partial prothrombin time distribution for people in different thrombosis level(figure9)'</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'APTT'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>Text(0.5, 0, 'APTT')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-23-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="the-stacked-bar-graphs-showed-that-the-distribution-of-activated-partial-prothrombin-time-can-help-to-differentiate-patients-in-different-thrombosis-levels-when-aptt-is-greater-than-35-patient-turn-from-all-level-1-to-level-12-and-3.-when-the-aptt-value-reach-between-80-and-110-the-patients-are-more-likely-to-be-thrombosis-level-0." class="level3">
<h3 class="anchored" data-anchor-id="the-stacked-bar-graphs-showed-that-the-distribution-of-activated-partial-prothrombin-time-can-help-to-differentiate-patients-in-different-thrombosis-levels-when-aptt-is-greater-than-35-patient-turn-from-all-level-1-to-level-12-and-3.-when-the-aptt-value-reach-between-80-and-110-the-patients-are-more-likely-to-be-thrombosis-level-0.">The stacked bar graphs showed that the distribution of activated partial prothrombin time can help to differentiate patients in different thrombosis levels, when APTT is greater than 35, patient turn from all level 1 to level 1、2 and 3. When the APTT value reach between 80 and 110, the patients are more likely to be thrombosis level 0.</h3>
</section>
</section>
<section id="the-joint-distribution-of-prothrombin-time-activated-partial-prothrombin-time-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis" class="level2">
<h2 class="anchored" data-anchor-id="the-joint-distribution-of-prothrombin-time-activated-partial-prothrombin-time-for-people-in-different-thrombosis-level-level-0-no-thrombosis-level-1-slight-thrombosis-level-2-severe-thrombosis">The joint distribution of Prothrombin time, Activated partial prothrombin time for people in different thrombosis level (level 0 no thrombosis, level 1 slight thrombosis, level 2 severe thrombosis)</h2>
<div class="cell" data-pycharm="{&quot;name&quot;:&quot;#%%\n&quot;}" data-execution_count="24">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> sns.jointplot(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>data,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"pt"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"aptt"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">"thrombosis"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"kde"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    palette <span class="op">=</span> [<span class="st">'blue'</span>,<span class="st">'red'</span>,<span class="st">'green'</span>],</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>g.set_axis_labels(<span class="st">"Prothrombin time"</span>, <span class="st">"Activated partial prothrombin time"</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x7feb61a56850&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="HW2_EDA_files/figure-html/cell-24-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="prothrombin-time-activated-partial-prothrombin-time-are-two-features-that-can-distinguish-between-different-thrombosis-levels-so-we-output-their-joint-distribution-to-see-if-they-are-distinguishable-and-the-joint-distribution-graph-shows-the-joint-distribution-of-thrombosis-level-0-and-thrombosis-level-2-is-almost-the-same.-however-the-joint-distribution-of-thrombosis-level-0-and-thrombosis-level-2-have-non-overlapping-parts-so-we-can-construct-joint-distribution-features-to-distinguish-between-patients-with-thrombosis-level-0-and-thrombosis-level-2" class="level3">
<h3 class="anchored" data-anchor-id="prothrombin-time-activated-partial-prothrombin-time-are-two-features-that-can-distinguish-between-different-thrombosis-levels-so-we-output-their-joint-distribution-to-see-if-they-are-distinguishable-and-the-joint-distribution-graph-shows-the-joint-distribution-of-thrombosis-level-0-and-thrombosis-level-2-is-almost-the-same.-however-the-joint-distribution-of-thrombosis-level-0-and-thrombosis-level-2-have-non-overlapping-parts-so-we-can-construct-joint-distribution-features-to-distinguish-between-patients-with-thrombosis-level-0-and-thrombosis-level-2">“Prothrombin time”, “Activated partial prothrombin time”, are two features that can distinguish between different thrombosis levels, so we output their joint distribution to see if they are distinguishable, and the joint distribution graph shows The joint distribution of thrombosis level = 0 and thrombosis level = 2 is almost the same. However, the joint distribution of thrombosis level = 0 and thrombosis level = 2 have non-overlapping parts, so we can construct joint distribution features to distinguish between patients with thrombosis level = 0 and thrombosis level = 2</h3>
<p>Technical Summary</p>
<p>In this analysis, we performed exploratory data analysis (EDA) on a dataset containing information about patients with different diagnostic symptoms. The dataset contains information about patients’ demographics, laboratory test results, and thrombosis levels.</p>
<p>The main goal of this analysis was to identify the features that can help distinguish between different diagnostic symptoms and thrombosis levels. We started by exploring the distribution of different laboratory test results for patients with different thrombosis levels. We used both box plots and violin plots to visualize the distribution of different antibodies for patients with different thrombosis levels. The results showed that Prothrombin time, activated partial prothrombin time, and anti-nucleus antibodies can help distinguish between patients with different thrombosis levels. However, the distribution of antibodies was highly overlapped for patients with different diagnostic symptoms, making it difficult to distinguish between different diagnostic symptoms based on antibody characteristics alone.</p>
<p>We also explored the impact of gender on antibody characteristics in patients with systemic lupus erythematosus (SLE). The results showed that antibody concentrations are significantly different between men and women in SLE patients, suggesting that gender needs to be considered when identifying SLE patients.</p>
<p>Finally, we used joint distribution plots to explore the relationship between different laboratory test results. The results showed that joint distribution features can help distinguish between patients with thrombosis level = 0 and thrombosis level = 2.</p>
<p>In conclusion, our analysis showed that different laboratory test results can help distinguish between patients with different thrombosis levels and the impact of gender on antibody characteristics in SLE patients. We also found that joint distribution features can help distinguish between patients with thrombosis level = 0 and thrombosis level = 2. However, the distribution of antibodies was highly overlapped for patients with different diagnostic symptoms, making it difficult to distinguish between different diagnostic symptoms based on antibody characteristics alone.</p>
<p>The most useful visualization for our analysis was the box plot and the violin plot, which helped us to explore the distribution of different antibodies for patients with different thrombosis levels. However, these visualizations were less useful for exploring the relationship between different laboratory test results, and joint distribution plots were more useful for this purpose. We also found that the data has some missing values, which we dealt with by filling missing values with 0. Overall, the data provided by the authors is good, but there are some missing values that need to be handled properly.</p>
<p>Github Link https://github.com/anly503/hw2-spring-2023-ShufengLiLeo.git</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>